(this.webpackJsonpffmio=this.webpackJsonpffmio||[]).push([[0],{383:function(e,t,n){},384:function(e,t,n){},547:function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(0),c=n.n(i),s=n(15),a=n.n(s),o=(n(383),n.p,n(384),n(20)),l=n(349),j=n(84),u=n.n(j),d=n(38),O=n(188),b=n(86),h=n(637),f=n(306);new DOMParser;function p(){return(p=Object(O.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,fetch(t).then((function(e){return e.text()})).then((function(e){return Object(f.kml)((new DOMParser).parseFromString(e,"text/xml"))}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(O.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,fetch("https://fishbase.ropensci.org/species?limit=10&FBname=".concat(t,"&fields=image,BodyShapeI,MainCatchingMethod,Weight,AnaCat,DemersPelag,Fresh,Saltwater,Author,UsedforAquaculture,Comments,FBname,Species,Genus,Importance,PriceCateg,PriceReliability,Length,Vulnerability,Subfamily")).then((function(e){return e.json()}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(O.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./feshries.json").then((function(e){return e.json()})).then((function(e){return e.filter((function(e){return-1!==e.fishery_name.replaceAll(/ /g,"").split("|").indexOf("".concat(t))}))}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(e){var t,n=e.setTooltipContent,c=e.setRows,s=e.fisheries,a=e.setOpen,l=Object(i.useState)(),j=Object(o.a)(l,2),u=j[0],O=j[1],f=Object(i.useState)(),m=Object(o.a)(f,2),y=m[0],_=m[1],v=Object(i.useState)(),P=Object(o.a)(v,2),E=P[0],N=P[1],S=Object(i.useState)(),A=Object(o.a)(S,2),R=A[0],k=A[1],w=Object(i.useState)(!1),I=Object(o.a)(w,2),C=I[0],M=I[1],G=Object(i.useState)(),D=Object(o.a)(G,2),T=(D[0],D[1]);if(JSON.stringify(s)!==JSON.stringify(y)){_(s);var F=s.fishery_name.split(",")[0];T(function(){return x.apply(this,arguments)}(F.substring(0,F.length-1))),s.map_info?function(){return p.apply(this,arguments)}((t=s.map_info,"https://cors-anywhere.herokuapp.com/"+t)).then((function(e){var t,n=function(e){var t,n,r,i=null===(t=e.features.filter((function(e){return"Polygon"===e.geometry.type}))[0])||void 0===t?void 0:t.geometry.coordinates[0],c=null===(n=e.features.filter((function(e){return"Point"===e.geometry.type}))[0])||void 0===n?void 0:n.geometry.coordinates,s=null===(r=e.features.filter((function(e){return"Point"===e.geometry.type}))[0])||void 0===r?void 0:r.properties;return e.features?{line:i,point:[c[0],c[1]],props:s}:(M(!0),[])}(e);N((t=n,console.log("geos:",t),Object(r.jsx)(b.Line,{coordinates:t.line,stroke:"blue",fill:"blue",style:{zIndex:"inherit"},fillRule:"evenodd",fillOpacity:"0.3",strokeWidth:.1,strokeLinecap:"round"}))),k(function(e){var t,n;return Object(r.jsx)(b.Annotation,{subject:e.point,dx:-90,dy:-30,connectorProps:{stroke:"#444",strokeWidth:.2,strokeLinecap:"round"},children:Object(r.jsx)("text",{x:"-8",textAnchor:"end",style:{fontSize:"6px"},alignmentBaseline:"middle",fill:"#444",children:((null===(t=e.props)||void 0===t?void 0:t.name)||(null===(n=e.props)||void 0===n?void 0:n.description)).replace(".kml","")})})}(n))})):M(!0)}return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.ComposableMap,{"data-tip":"",projectionConfig:{scale:200},children:Object(r.jsxs)(b.ZoomableGroup,{children:[Object(r.jsx)(b.Geographies,{geography:"./world-110m.json",children:function(e){return e.geographies.map((function(e){return Object(r.jsx)(b.Geography,{geography:e,onMouseEnter:function(){var t=e.properties,r=t.ABBREV,i=t.CONTINENT,c=t.FORMAL_EN,s=t.GDP_MD_EST,a=t.GDP_YEAR,o=t.ISO_A2,l=t.ISO_A3,j=t.NAME,u=t.NAME_LONG,d=t.POP_EST,O=t.POP_RANK,b=t.POP_YEAR,h=t.REGION_UN,f=t.SUBREGION;n({ABBREV:r,CONTINENT:i,FORMAL_EN:c,GDP_MD_EST:s,GDP_YEAR:a,ISO_A2:o,ISO_A3:l,NAME:j,NAME_LONG:u,POP_EST:d,POP_RANK:O,POP_YEAR:b,REGION_UN:h,SUBREGION:f})},onMouseLeave:function(){n("")},onClick:function(){var t=e.properties,n=t.NAME;t.POP_EST;(function(e){return g.apply(this,arguments)})(n).then((function(e){var t=0;u===n&&c([]),O(n),a(!0),c(e.map((function(e){return Object(d.a)({id:t++},e)})))}))},style:{default:{fill:"#D6D6DA",outline:"none"},hover:{fill:"#F53",outline:"none"},pressed:{fill:"#444",outline:"none"}}},e.rsmKey)}))}}),E,R]})}),Object(r.jsx)(h.a,{open:C,color:"green",anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&M(!1)},message:"\u043f\u0440\u043e\u0441\u0442\u0438! \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u043e\u043c\u044b\u0441\u043b\u0430!"})]})},y=Object(i.memo)(m),_=(n(3),n(42)),v=(n(548),n(354)),P=n(604),E=n(605),N=window.innerHeight,S=window.innerWidth,A={light:{foreground:"#000000",background:"#eeeeee",Rnd:{width:Number((S/3.5).toFixed()),height:N-40}},dark:{foreground:"#ffffff",background:"#222222"}},R=c.a.createContext(A.light),k=n(606),w=n(607),I={icon:Object(r.jsx)(P.a,{style:{position:"relative"}}),status:!1};function C(e,t){switch(t.type){case"switch":return{icon:e.status?Object(r.jsx)(P.a,{style:{position:"relative"}}):Object(r.jsx)(E.a,{style:{position:"relative"}}),status:!e.status};default:throw new Error}}var M=Object(i.forwardRef)((function(e,t){return Object(r.jsx)(k.a,Object(d.a)(Object(d.a)({direction:"down",ref:t},e),{},{mountOnEnter:!0,unmountOnExit:!0}))})),G=function(e){var t=e.rows,n=e.setFisheries,c=e.open,s=e.setOpen,a=Object(i.useContext)(R),l=Object(i.useRef)(null),j=Object(i.useState)(!0),u=Object(o.a)(j,2),O=(u[0],u[1],Object(i.useReducer)(C,I)),b=Object(o.a)(O,2),h=b[0],f=b[1];return Object(r.jsx)(w.a,{fullScreen:!0,open:c,ref:l,onClose:function(){s(!1)},TransitionComponent:M,children:Object(r.jsxs)(_.d,{data:t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{fishery_name:e.fishery_name.replaceAll("|",",")})})),wordWrap:!0,style:{fontSize:".6em"},height:a.Rnd.height,width:a.Rnd.width,children:[Object(r.jsxs)(_.b,{align:"center",style:{padding:"unset",margin:"unset",maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(r.jsx)(_.c,{children:"\u043a\u043e\u0434(fao.org)"}),Object(r.jsx)(_.a,{dataKey:"fishery_id",onClick:function(e){console.log(e.target)}})]}),Object(r.jsxs)(_.b,{align:"center",style:{padding:"unset",margin:"unset",maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(r.jsx)(_.c,{children:"\u043f\u0440\u043e\u043c\u044b\u0441\u043b\u0430"}),Object(r.jsx)(_.a,{dataKey:"fishery_name"})]}),Object(r.jsxs)(_.b,{align:"center",style:{padding:"unset",margin:"unset",maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(r.jsx)(_.c,{children:"\u0437\u0430\u043f\u0430\u0441"}),Object(r.jsx)(_.a,{dataKey:"exploiting_stocks"})]}),Object(r.jsxs)(_.b,{align:"center",style:{padding:"unset",margin:"unset",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(r.jsx)(_.c,{children:"maps"}),Object(r.jsx)(_.a,{dataKey:"map_info",children:function(e,t){return Object(r.jsx)(v.a,{"aria-label":"add",style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(){h.status||n(e),f({type:"switch"})},children:h.icon})}})]})]})})},D=function(e){var t=Object(i.useState)({}),n=Object(o.a)(t,2),c=n[0],s=n[1],a=Object(i.useState)([]),j=Object(o.a)(a,2),u=j[0],d=j[1],O=Object(i.useState)(),b=Object(o.a)(O,2),h=b[0],f=b[1],p=Object(i.useState)(!1),x=Object(o.a)(p,2),g=x[0],m=x[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(y,{setTooltipContent:s,setRows:d,setOpen:m,fisheries:h}),""===c||Object(r.jsx)(l.a,{place:"bottom",type:"light",effect:"float",style:{display:"inline",padding:"none",alignItems:"center",justifyContent:"left"},children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"CONTINENT:"}),c.CONTINENT]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"FORMAL_EN:"}),c.FORMAL_EN]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:" GDP_MD_EST:"}),c.GDP_MD_EST]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"GDP_YEAR:"}),c.GDP_YEAR]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"ISO_A2:"}),c.ISO_A2]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"ISO_A3:"}),c.ISO_A3]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"NAME:"}),c.NAME]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"NAME_LONG:"}),c.NAME_LONG]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"POP_EST:"}),c.POP_EST]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"POP_RANK:"}),c.POP_RANK]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"POP_YEAR:"}),c.POP_YEAR]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("kbd",{children:"REGION_UN:"}),c.REGION_UN]}),Object(r.jsxs)("li",{children:[" ",Object(r.jsx)("kbd",{children:"SUBREGION:"}),c.SUBREGION]})]})}),Object(r.jsx)(G,{rows:u,setFisheries:f,setOpen:m,open:g})]})};document.oncontextmenu=function(e){!function(e){void 0!=e.preventDefault&&e.preventDefault();void 0!=e.stopPropagation&&e.stopPropagation()}(e)};var T=n(629),F=n(628),L={DbList:function(e,t){return Promise}},B=n(630),K=n(631),U=n(620),W=n(621),Y=n(622),z=(n(633),n(632),n(638),n(626),n(636),n(316)),J=(n.n(z).a,function(e){return Object(r.jsx)(B.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(r.jsxs)(K.a,{children:[Object(r.jsx)(U.a,{source:"id"}),Object(r.jsx)(U.a,{source:"title"}),Object(r.jsx)(W.a,{source:"published_at"}),Object(r.jsx)(U.a,{source:"average_note"}),Object(r.jsx)(U.a,{source:"views"}),Object(r.jsx)(Y.a,{basePath:"/posts"})]})}))}),V=function(){return Object(r.jsx)(T.a,{dataProvider:L,children:Object(r.jsx)(F.a,{name:"contries",list:J})})},H=n(22),q=n(18);var Z=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(H.a,{children:Object(r.jsxs)(q.d,{children:[Object(r.jsx)(q.b,{path:"/datamg",children:Object(r.jsx)(V,{})}),Object(r.jsx)(q.b,{path:"/",children:Object(r.jsx)(R.Provider,{value:A.light,children:Object(r.jsx)(D,{})})})]})})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,642)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),c(e),s(e)}))};a.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(Z,{})}),document.getElementById("root")),Q()}},[[547,1,2]]]);
//# sourceMappingURL=main.a1168c95.chunk.js.map