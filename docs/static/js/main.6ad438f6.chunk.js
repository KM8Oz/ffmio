(this.webpackJsonpffmio=this.webpackJsonpffmio||[]).push([[0],{468:function(e,t,n){},469:function(e,t,n){},483:function(e,t){},485:function(e,t){},685:function(e,t,n){"use strict";n.r(t);var i=n(6),r=n(0),s=n.n(r),c=n(15),a=n.n(c),o=(n(468),n(469),n(25)),l=n(435),d=n(102),j=n.n(d),u=n(35),b=n(21),O=n(234),h=n(386),f=n(71),p=n(777),x=n(387);new DOMParser;function g(){return(g=Object(O.a)(j.a.mark((function e(){var t,n,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",e.next=3,fetch(t).then((function(e){return e.text()})).then((function(e){return Object(x.kml)((new DOMParser).parseFromString(e,"text/xml"))}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(O.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./feshries.json").then((function(e){return e.json()})).then((function(e){return e.filter((function(e){return-1!==e.fishery_name.replaceAll(/ /g,"").split("|").indexOf("".concat(t))}))}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return e?new Array(361).fill(1).map((function(t,n){return[-180+n,e]})):[[-180,0],[-90,0],[0,0],[90,0],[180,0]]}var v=function(e){var t,n=e.setTooltipContent,s=e.setRows,c=e.fisheries,a=e.setOpen,l=(e.table,e.setFish),d=e.setOpenfish,j=Object(r.useState)(),O=Object(o.a)(j,2),x=O[0],v=O[1],_=Object(r.useState)(),A=Object(o.a)(_,2),P=A[0],S=A[1],k=Object(r.useState)(),E=Object(o.a)(k,2),N=E[0],R=E[1],I=Object(r.useState)(),w=Object(o.a)(I,2),D=w[0],C=w[1],T=Object(r.useState)(),F=Object(o.a)(T,2),G=F[0],M=F[1],L=Object(r.useState)(Object(b.a)({center:[0,0],isPressed:!1,mouseX:null,mouseY:null,scale:400,rotate:[0,0,0]},"center",[0,0])),B=Object(o.a)(L,2),W=B[0];B[1];if(JSON.stringify(c)!==P){S(JSON.stringify(c));var U=c.fishery_name.split(",")[0],H=U.substring(0,U.length-1);H!==G&&(M(H),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=new h.DDG("ffmio");return new Promise((function(i){fetch("https://fishbase.ropensci.org/species?limit=10&FBname=".concat(e,"&fields=image,BodyShapeI,MainCatchingMethod,Weight,AnaCat,DemersPelag,Fresh,Saltwater,Author,UsedforAquaculture,Comments,FBname,Species,Genus,Importance,PriceCateg,PriceReliability,Length,Vulnerability,Subfamily")).then((function(e){return e.json()})).then((function(r){n.instantAnswer(e,{skip_disambig:"0"},(function(e,n){r||t(!1),i({data:r,datav1:n||{AnswerType:"",DefinitionURL:"",ImageHeight:"",Heading:"",Type:"",Entity:"",RelatedTopics:[],Answer:"",Results:[],AbstractURL:"",AbstractSource:"",Image:"",Abstract:"",ImageWidth:"",Definition:"",AbstractText:"",DefinitionSource:"",Infobox:"",meta:null,ImageIsLogo:"",Redirect:""}})}))}))}))}(H,d).then((function(e){console.log(e),l(e)})),console.log(H),c.map_info?function(){return g.apply(this,arguments)}((t=c.map_info,"https://cors-anywhere.herokuapp.com/"+t)).then((function(e){var t,n=function(e){var t,n,i,r=null===(t=e.features.filter((function(e){return"Polygon"===e.geometry.type}))[0])||void 0===t?void 0:t.geometry.coordinates[0],s=null===(n=e.features.filter((function(e){return"Point"===e.geometry.type}))[0])||void 0===n?void 0:n.geometry.coordinates,c=null===(i=e.features.filter((function(e){return"Point"===e.geometry.type}))[0])||void 0===i?void 0:i.properties;return e.features?{line:r,point:[s[0],s[1]],props:c}:(p.a.info("\u043f\u0440\u043e\u0441\u0442\u0438! \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u043e\u043c\u044b\u0441\u043b\u0430!"),[])}(e);R((t=n,console.log("geos:",t),Object(i.jsx)(f.Line,{coordinates:t.line,stroke:"blue",fill:"blue",style:{zIndex:"inherit"},fillRule:"evenodd",fillOpacity:"0.8",strokeWidth:.1,strokeLinecap:"round"}))),C(function(e){var t,n;return Object(i.jsx)(f.Annotation,{subject:e.point,dx:-90,dy:-30,connectorProps:{stroke:"#fff",strokeWidth:.2,strokeLinecap:"round"},children:Object(i.jsx)("text",{x:"-8",textAnchor:"end",style:{fontSize:"7px"},alignmentBaseline:"middle",stroke:"#fff",strokeWidth:.1,fill:"#444",children:((null===(t=e.props)||void 0===t?void 0:t.name)||(null===(n=e.props)||void 0===n?void 0:n.description)).replace(".kml","")})})}(n))})):p.a.info("\u043f\u0440\u043e\u0441\u0442\u0438! \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0433\u0440\u0430\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u043e\u043c\u044b\u0441\u043b\u0430!"))}return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(f.ComposableMap,{"data-tip":"",projection:"geoEqualEarth",projectionConfig:W,children:Object(i.jsxs)(f.ZoomableGroup,{center:W.center,children:[Object(i.jsx)(f.Graticule,{stroke:"#DDD",strokeWidth:.3}),N,Object(i.jsx)(f.Geographies,{geography:"./world-110m.json",onDrag:function(e){console.log(e)},children:function(e){return e.geographies.map((function(e){return Object(i.jsx)(f.Geography,{geography:e,onMouseEnter:function(){var t=e.properties,i=t.ABBREV,r=t.CONTINENT,s=t.FORMAL_EN,c=t.GDP_MD_EST,a=t.GDP_YEAR,o=t.ISO_A2,l=t.ISO_A3,d=t.NAME,j=t.NAME_LONG,u=t.POP_EST,b=t.POP_RANK,O=t.POP_YEAR,h=t.REGION_UN,f=t.SUBREGION;n({db:{ABBREV:i,CONTINENT:r,FORMAL_EN:s,GDP_MD_EST:c,GDP_YEAR:a,ISO_A2:o,ISO_A3:l,NAME:d,NAME_LONG:j,POP_EST:u,POP_RANK:b,POP_YEAR:O,REGION_UN:h,SUBREGION:f},types:"countries"})},onMouseLeave:function(){n({db:null,types:"countries"})},onClick:function(){var t=e.properties,i=t.NAME;t.POP_EST;(function(e){return m.apply(this,arguments)})(i).then((function(e){n({db:null,types:"fishries"});var t=0;x===i&&s([]),v(i),a(!0),s(e.map((function(e){return Object(u.a)({id:t++},e)})))}))},style:{default:{fill:"#D6D6DA",outline:"none"},hover:{fill:"#F53",outline:"none"},pressed:{fill:"#444",outline:"none"}}},e.rsmKey)}))}}),Object(i.jsx)(f.Line,{coordinates:y(0),stroke:"#F53",strokeWidth:.3}),Object(i.jsx)(f.Line,{coordinates:y(23),stroke:"#776865",strokeWidth:.3,strokeDasharray:[5,5]}),Object(i.jsx)(f.Line,{coordinates:y(-24),stroke:"#776865",strokeWidth:.3,strokeDasharray:[5,5]}),D]})})})},_=Object(r.memo)(v),A=(n(4),n(769)),P=n(88),S=window.innerHeight,k=window.innerWidth,E={light:{foreground:"#000000",background:"#eeeeee",Rnd:{width:Number((k/3.5).toFixed()),height:S-40}},dark:{foreground:"#ffffff",background:"#222222"}},N=s.a.createContext(E.light),R=A.a.Column,I=A.a.HeaderCell,w=A.a.Cell,D=function(e){var t=e.rows,n=e.setFisheries,s=(e.open,e.setOpen),c=e.setOpenfish,a=Object(r.useContext)(N),l=(Object(r.useRef)(null),Object(r.useState)(!0)),d=Object(o.a)(l,2),j=(d[0],d[1],Object(r.useState)()),b=Object(o.a)(j,2),O=b[0],h=b[1];return Object(i.jsxs)(A.a,{data:t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{fishery_name:e.fishery_name.replaceAll("|",",")})})),wordWrap:!0,style:{fontSize:".6em"},height:a.Rnd.height,width:a.Rnd.width,children:[Object(i.jsxs)(R,{align:"center",style:{padding:"unset",margin:"unset",maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(i.jsx)(I,{children:"\u043a\u043e\u0434(fao.org)"}),Object(i.jsx)(w,{dataKey:"fishery_id",onClick:function(e){console.log(e.target)}})]}),Object(i.jsxs)(R,{align:"center",style:{padding:"unset",margin:"unset",maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(i.jsx)(I,{children:"\u043f\u0440\u043e\u043c\u044b\u0441\u043b\u0430"}),Object(i.jsx)(w,{dataKey:"fishery_name"})]}),Object(i.jsxs)(R,{align:"center",style:{padding:"unset",margin:"unset",maxWidth:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(i.jsx)(I,{children:"\u0437\u0430\u043f\u0430\u0441"}),Object(i.jsx)(w,{dataKey:"exploiting_stocks"})]}),Object(i.jsxs)(R,{align:"center",style:{padding:"unset",margin:"unset",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(i.jsx)(I,{children:"maps"}),Object(i.jsx)(w,{dataKey:"map_info",children:function(e,t){return Object(i.jsx)(P.a,{icon:"close",style:{color:"green"},id:"btn"+t,onClick:function(){t!==O?(n(e),h(t),s(!1),c(!0)):n(null)}})}})]})]})},C=Object(r.memo)(D),T=n(779),F=n(780),G=n(743),M=function(e){var t,n,r=e.Fish,s=e.openfish,c=e.setOpenfish;return Object(i.jsxs)(T.a,{show:s,onHide:function(){return c(!1)},backdrop:!1,autoFocus:!1,size:"xs",keyboard:!0,children:[Object(i.jsx)(T.a.Header,{children:Object(i.jsx)(T.a.Title,{children:r.data.data?r.data.data[0].FBname:null===(t=r.datav1)||void 0===t?void 0:t.Heading})}),Object(i.jsx)(T.a.Body,{children:Object(i.jsxs)(F.a,{shaded:!0,bordered:!0,bodyFill:!0,style:{display:"flex",margin:"0px 0px",width:"100%",height:"100%"},children:[Object(i.jsx)("img",{src:function(){var e="https://via.placeholder.com/480x240/?text=no%20image";return r.data.data&&r.data.data[0].image?r.data.data[0].image:r.datav1?r.datav1.Image:e}(),height:"240",style:{width:"100%"}}),Object(i.jsx)(F.a,{header:r.data.data?r.data.data[0].Species?r.data.data[0].Species:"none":null===(n=r.datav1)||void 0===n?void 0:n.Heading,children:Object(i.jsx)("p",{children:Object(i.jsx)("small",{children:r.data.data?r.data.data[0].Comments:r.datav1.Abstract})})})]})})]})};document.oncontextmenu=function(e){!function(e){void 0!=e.preventDefault&&e.preventDefault();void 0!=e.stopPropagation&&e.stopPropagation()}(e)};var L=function(e){var t=Object(r.useState)({}),n=Object(o.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)([]),d=Object(o.a)(a,2),j=d[0],u=d[1],b=Object(r.useState)(),O=Object(o.a)(b,2),h=O[0],f=O[1],p=Object(r.useState)(!1),x=Object(o.a)(p,2),g=x[0],m=x[1],y=Object(r.useState)(!1),v=Object(o.a)(y,2),A=v[0],P=v[1],S=Object(r.useState)({data:{data:[{}],datav1:{}}}),k=Object(o.a)(S,2),E=k[0],N=k[1],R=function(){return Object(i.jsx)(C,{rows:j,setFisheries:f,setOpen:m,setOpenfish:P,open:g})};return Object(i.jsxs)("div",{children:[Object(i.jsx)(_,{setFish:N,setTooltipContent:c,table:R,setRows:u,setOpenfish:P,setOpen:m,fisheries:h}),!s.db||Object(i.jsx)(l.a,{place:"bottom",type:"light",effect:"float",style:{display:"inline",padding:"none",alignItems:"center",justifyContent:"left"},children:Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"CONTINENT:"}),s.db.CONTINENT]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"FORMAL_EN:"}),s.db.FORMAL_EN]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:" GDP_MD_EST:"}),s.db.GDP_MD_EST]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"GDP_YEAR:"}),s.db.GDP_YEAR]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"ISO_A2:"}),s.db.ISO_A2]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"ISO_A3:"}),s.db.ISO_A3]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"NAME:"}),s.db.NAME]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"NAME_LONG:"}),s.db.NAME_LONG]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"POP_EST:"}),s.db.POP_EST]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"POP_RANK:"}),s.db.POP_RANK]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"POP_YEAR:"}),s.db.POP_YEAR]}),Object(i.jsxs)("li",{children:[Object(i.jsx)("kbd",{children:"REGION_UN:"}),s.db.REGION_UN]}),Object(i.jsxs)("li",{children:[" ",Object(i.jsx)("kbd",{children:"SUBREGION:"}),s.db.SUBREGION]})]})}),Object(i.jsxs)(G.a,{show:g,backdrop:!1,onHide:function(){return m(!1)},style:{opacity:.8,display:"flex",justifyContent:"space-around",alignItems:"center"},children:[Object(i.jsx)(G.a.Header,{children:Object(i.jsx)(G.a.Title,{style:{textAlign:"center"},children:"\u041f\u0420\u041e\u041c\u042b\u0421\u0418\u041b"})}),Object(i.jsx)(G.a.Body,{style:{overflow:"hidden",scrollBehavior:"unset"},children:Object(i.jsx)(R,{})})]}),Object(i.jsx)(M,{Fish:E,openfish:A,setOpenfish:P})]})},B=n(768),W=n(767),U={DbList:function(e,t){return Promise}},H=n(770),K=n(771),Y=n(759),z=n(760),J=n(761),V=(n(773),n(772),n(778),n(765),n(781),n(403)),q=(n.n(V).a,function(e){return Object(i.jsx)(H.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(i.jsxs)(K.a,{children:[Object(i.jsx)(Y.a,{source:"id"}),Object(i.jsx)(Y.a,{source:"title"}),Object(i.jsx)(z.a,{source:"published_at"}),Object(i.jsx)(Y.a,{source:"average_note"}),Object(i.jsx)(Y.a,{source:"views"}),Object(i.jsx)(J.a,{basePath:"/posts"})]})}))}),X=function(){return Object(i.jsx)(B.a,{dataProvider:U,children:Object(i.jsx)(W.a,{name:"contries",list:q})})},Z=n(26),Q=n(22);var $=function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(Z.a,{children:Object(i.jsxs)(Q.d,{children:[Object(i.jsx)(Q.b,{path:"/datamg",children:Object(i.jsx)(X,{})}),Object(i.jsx)(Q.b,{path:"/",children:Object(i.jsx)(N.Provider,{value:E.light,children:Object(i.jsx)(L,{})})})]})})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,785)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),s(e),c(e)}))};a.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)($,{})}),document.getElementById("root")),ee()}},[[685,1,2]]]);
//# sourceMappingURL=main.6ad438f6.chunk.js.map